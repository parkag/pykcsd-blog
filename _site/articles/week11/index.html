<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Completing the project (week 11) &#8211; pykCSD @ GSoC</title>
<meta name="description" content="week 11 - completing tasks">
<meta name="keywords" content="coding">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Completing the project (week 11)">
<meta property="og:description" content="week 11 - completing tasks">
<meta property="og:url" content="http://localhost:4000/articles/week11/">
<meta property="og:site_name" content="pykCSD @ GSoC">





<link rel="canonical" href="http://localhost:4000/articles/week11/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="pykCSD @ GSoC Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">


<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="http://localhost:4000/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="http://localhost:4000/articles/">Articles</a>
				 
			</li>
	        
	        <li><a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="http://localhost:4000/" class="site-logo" rel="home" title="pykCSD @ GSoC"><img src="http://localhost:4000/images/site-logo.png" width="200" height="200" alt="pykCSD @ GSoC logo" class="animated fadeInUp"></a>
        
        <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">pykCSD @ GSoC</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">A journey through Python implementation of Kernel Current Source Density Method</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#coding" title="Pages tagged coding">coding</a></span>
        
          <h1 class="entry-title">Completing the project (week 11)</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="http://localhost:4000/images/profi_photo.jpg" alt="Grzegorz Parka photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="http://localhost:4000/about/" title="About Grzegorz Parka">Grzegorz Parka</a></span></span>
        <span class="entry-date date published"><time datetime="2014-07-31T00:00:00+02:00"><i class="icon-calendar-empty"></i> July 31, 2014</time></span>
        <span class="entry-date date modified"><time datetime="2014-07-31"><i class="icon-pencil"></i> July 31, 2014</time></span>
        <span class="entry-comments"><i class="icon-comment-alt"></i> <a href="#disqus_thread">Comment</a></span>
        <span><a href="http://localhost:4000/articles/week11/" rel="bookmark" title="Completing the project (week 11)"><i class="icon-link"></i> Permalink</a></span>
        
        <span class="social-share-facebook">
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/week11/" title="Share on Facebook" itemprop="Facebook"><i class="icon-facebook-sign"></i> Like</a></span>
        <span class="social-share-twitter">
            <a href="https://twitter.com/intent/tweet?hashtags=articles&text=Completing the project (week 11)&url=http://localhost:4000/articles/week11/&via=" title="Share on Twitter" itemprop="Twitter"><i class="icon-twitter-sign"></i> Tweet</a></span>
        <span class="social-share-googleplus">
            <a href="https://plus.google.com/share?url=http://localhost:4000/articles/week11/" title="Share on Google Plus" itemprop="GooglePlus"><i class="icon-google-plus-sign"></i> +1</a></span>
            <!-- /.social-share -->
      </footer>
      <div class="entry-content">
        <p>The end of GSoC 2014 coding phase is getting closer and closer. This week I’m completing the tasks listed in the previous post.</p>

<h2 id="tasks-completed-this-week">Tasks completed this week:</h2>

<h3 id="normalizing-constants-in-2d3d-basis-functions">Normalizing constants in 2d/3d basis functions</h3>
<p>It came out that 2D gaussian basis function in the previous KCSD script was not normalized. After normalization the tests which compare KCSD2D to matlab scripts are not passing. Unwillingly, I’m dropping the old KCSD2D comparison tests.</p>

<h3 id="creating-validation-framework">Creating validation framework</h3>
<p>This task is about creating a set of routines which help to compare 1D, 2D, 3D KCSD reconstruction against model CSD and potentials calculated using forward scheme.</p>

<h4 id="sample-reconstructions">Sample reconstructions</h4>

<p>1D reconstruction</p>

<pre><code>x = np.linspace(-10, 10, 100)

true_csd = 1.0 * np.exp(-(x + 2.)**2/(2 * np.pi * 0.5))
true_csd += 0.5 * np.exp(-(x - 7)**2/(2 * np.pi * 1.0))

elec_pos = np.array([-9.0, -6.9, -3.1, -0.3, 2.5, 5.7, 9.3])
params = {'xmin': -10, 'xmax': 10, 'gdX': 0.20}
indx = [5, 15, 25, 45, 51, 73, 89]

compare_with_model_1D(x, true_csd, indx, params)
</code></pre>

<figure>
	<a href="http://localhost:4000/images/figure_1D_model_comparison.png"><img src="http://localhost:4000/images/figure_1D_model_comparison.png" /></a>
	<figcaption>Sample 1D comparison</figcaption>
</figure>

<p>2D reconstruction</p>

<pre><code>xlin = np.linspace(0, 10, 101)
ylin = np.linspace(0, 10, 101)
X, Y = np.meshgrid(xlin, ylin)
true_csd = 1.0 * np.exp(-((X - 8.)**2 + (Y - 8)**2)/(2 * np.pi * 1.5))
true_csd -= 0.5 * np.exp(-((X - 1)**2 + (Y - 9)**2)/(2 * np.pi * 2.0))
true_csd += 1.5 * np.exp(-((X - 2)**2 + (Y - 2)**2)/(2 * np.pi * 2.0))
kcsd_params = {'xmin': 0, 'xmax': 10,
          'ymin': 0, 'ymax': 10,
          'gdX': 0.10, 'gdY': 0.10,
          'h': 0.5}
indx = [[5, 5], [15, 10], [25, 50], [45, 70], [51, 30],
	[73, 89], [5, 80], [90, 15], [60,90]]
compare_with_model_2D(X, Y, true_csd, indx, kcsd_params)
</code></pre>
<figure>
	<a href="http://localhost:4000/images/figure_2D_model_comparison.png"><img src="http://localhost:4000/images/figure_2D_model_comparison.png" /></a>
	<figcaption>Sample 2D comparison</figcaption>
</figure>

<p>3D reconstruction is missing as I haven’t yet found a clear and simple way to display multiple 3D plots.</p>

<h3 id="time-series-management">Time series management</h3>

<p>The pykCSD toolbox can now estimate CSD for time recordings and calculate multiple frames.
However with many time frames and especially in the 3D case, the memory usage can go very high. This is yet to be optimized.</p>

<h3 id="whats-left">What’s left:</h3>

<ul>
  <li>Comparing images matlab/python visually (with existing datasets)</li>
  <li>tests on bigger datasets: 100, 1000, 10k electrodes and time frames</li>
  <li>describing workflows for documentation</li>
  <li>package deployment</li>
</ul>

<figure>
	<img src="http://localhost:4000/images/gsoc_horizontal.jpg" width="100%" />
</figure>

        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/articles/week10/" class="btn" title="Ensuring quality (week 10)">Previous article</a>
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Grzegorz Parka. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	
	<a href="http://facebook.com/grzegorz.parka" title="Grzegorz Parka on Facebook" target="_blank"><i class="icon-facebook icon-2x"></i></a>
	
	<a href="http://linkedin.com/in/parkag" title="Grzegorz Parka on LinkedIn" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
	
	
	
	<a href="http://github.com/parkag" title="Grzegorz Parka on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://localhost:4000/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'parkaggithubiopykcsdblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
