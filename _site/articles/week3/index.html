<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>One dimensional kCSD (week 3) &#8211; pykCSD @ GSoC</title>
<meta name="description" content="Implementing kCSD 1D">
<meta name="keywords" content="coding">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="One dimensional kCSD (week 3)">
<meta property="og:description" content="Implementing kCSD 1D">
<meta property="og:url" content="/pykcsd-blog/articles/week3/">
<meta property="og:site_name" content="pykCSD @ GSoC">





<link rel="canonical" href="/pykcsd-blog/articles/week3/">
<link href="/pykcsd-blog/feed.xml" type="application/atom+xml" rel="alternate" title="pykCSD @ GSoC Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/pykcsd-blog/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/pykcsd-blog/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/pykcsd-blog/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/pykcsd-blog/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/pykcsd-blog/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/pykcsd-blog/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/pykcsd-blog/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/pykcsd-blog/images/apple-touch-icon-144x144-precomposed.png">


<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="/pykcsd-blog/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="/pykcsd-blog/articles/">Articles</a>
				 
			</li>
	        
	        <li><a href="/pykcsd-blog/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="/pykcsd-blog/" class="site-logo" rel="home" title="pykCSD @ GSoC"><img src="/pykcsd-blog/images/site-logo.png" width="200" height="200" alt="pykCSD @ GSoC logo" class="animated fadeInUp"></a>
        
        <h1 class="site-title animated fadeIn"><a href="/pykcsd-blog/">pykCSD @ GSoC</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">A journey through Python implementation of Kernel Current Source Density Method</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="/pykcsd-blog/tags/#coding" title="Pages tagged coding">coding</a></span>
        
          <h1 class="entry-title">One dimensional kCSD (week 3)</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="/pykcsd-blog/images/profi_photo.jpg" alt="Grzegorz Parka photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="/pykcsd-blog/about/" title="About Grzegorz Parka">Grzegorz Parka</a></span></span>
        <span class="entry-date date published"><time datetime="2014-06-05T00:00:00+02:00"><i class="icon-calendar-empty"></i> June 05, 2014</time></span>
        <span class="entry-date date modified"><time datetime="2014-06-05"><i class="icon-pencil"></i> June 05, 2014</time></span>
        <span class="entry-comments"><i class="icon-comment-alt"></i> <a href="#disqus_thread">Comment</a></span>
        <span><a href="/pykcsd-blog/articles/week3/" rel="bookmark" title="One dimensional kCSD (week 3)"><i class="icon-link"></i> Permalink</a></span>
        
        <span class="social-share-facebook">
            <a href="https://www.facebook.com/sharer/sharer.php?u=/pykcsd-blog/articles/week3/" title="Share on Facebook" itemprop="Facebook"><i class="icon-facebook-sign"></i> Like</a></span>
        <span class="social-share-twitter">
            <a href="https://twitter.com/intent/tweet?hashtags=articles&text=One dimensional kCSD (week 3)&url=/pykcsd-blog/articles/week3/&via=" title="Share on Twitter" itemprop="Twitter"><i class="icon-twitter-sign"></i> Tweet</a></span>
        <span class="social-share-googleplus">
            <a href="https://plus.google.com/share?url=/pykcsd-blog/articles/week3/" title="Share on Google Plus" itemprop="GooglePlus"><i class="icon-google-plus-sign"></i> +1</a></span>
            <!-- /.social-share -->
      </footer>
      <div class="entry-content">
        <p>During this week I am finishing the kCSD implementation that works with data from 1D measurements, moving the code to the main repository and writing tests.</p>

<p>Some thoughts from the last days:</p>

<ol>
  <li>
    <p>I thought there were some problems with cross validation in 1D pykCSD because it was returning high regularization parameters <script type="math/tex">\lambda</script> for model data, where it should return very low values. My mentor, Daniel, suggested that my model sources or potentials could be wrong. And yeah<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>, it turned out that I was indeed calculating the initial potentials incorrectly.
The correct relation in 1D is:</p>

    <script type="math/tex; mode=display"> \phi(z) = \frac{1}{2 \sigma} \int  \sqrt{(z-z_0)^2 + R^2 } - \lvert z-z_0 \rvert)C(z) dz</script>

    <p>This is done assuming cylindrical symmetry <script type="math/tex">% <![CDATA[
H(x,y) = \begin{cases}
                                     1, & \text{if } x^2 + y^2 \leq h^2\\
                                     0, & \text{ otherwise}
                                 \end{cases} 
  %]]></script> </p>

    <p>and <script type="math/tex">C(z)</script> is the measured CSD</p>

    <figure>
     <a href="/pykcsd-blog/images/pykcsd1D_cylinder.jpg"><img src="/pykcsd-blog/images/pykcsd1D_cylinder.jpg" /></a>
 </figure>
  </li>
  <li>
    <p>What is the added value so far? </p>

    <p>More generalized scheme for cross validation. The existing script used something like randomized Leave One Out cross validation (which, to confuse me, was commented and called as a KFold cross validation). My <a href="http://nbviewer.ipython.org/github/parkag/notebooks/blob/master/pykCSD/pykCSD%20refactored.ipynb">current version</a> is able to accept any combination of indices (LeaveOneOut, KFold, ShuffleSplit and so on) which can be obtained with the use of index generators from the  Scikit-learn cross_validation module.</p>
  </li>
  <li>
    <p>Already looking more deeply into 2D kCSD code, it turns out that 1D and 2D implementations have more in common than I originally thought. If I recognized it properly, only the basis function management changes among the different method dimensionalities. Everything else is based on kernel operations which look all the same both in 1D and 2D.</p>
  </li>
</ol>

<figure>
	<img src="/pykcsd-blog/images/gsoc_horizontal.jpg" width="100%" />
</figure>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>I think everything Daniel told me so far turned out to be true and helpful :P <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/pykcsd-blog/articles/week2/" class="btn" title="One dimensional kCSD (week 2)">Previous article</a>
      
      
        <a href="/pykcsd-blog/articles/week4/" class="btn" title="Two dimensional kCSD (week 4)">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Grzegorz Parka. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	
	<a href="http://facebook.com/grzegorz.parka" title="Grzegorz Parka on Facebook" target="_blank"><i class="icon-facebook icon-2x"></i></a>
	
	<a href="http://linkedin.com/in/parkag" title="Grzegorz Parka on LinkedIn" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
	
	
	
	<a href="http://github.com/parkag" title="Grzegorz Parka on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/pykcsd-blog/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/pykcsd-blog/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : '/pykcsd-blog/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'parkaggithubiopykcsdblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
